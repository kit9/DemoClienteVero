<odoo>

    <!-- Formulario - Factura Proveedor -->
    <record id="detraccion_form_view_factura" model="ir.ui.view">
        <field name="name">detraccion.form.factura</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_supplier_form"/>
        <field name="arch" type="xml">
            <field name="date_invoice" position="before">
                <field name="document_modify"/>
                <field name="date_document"/>
            </field>
            <field name="date_invoice" position="replace">
                <field string="Fecha Contable" name="date_invoice" options="{'datepicker': {'warn_future': true}}"/>
            </field>
            <field name="move_name" position="after">
                <field name="exchange_rate"/>
            </field>
            <field name="partner_id" position="before">
                <field name="invoice_number"/>
                <field name="invoice_serie"/>
            </field>
            <field name="partner_id" position="after">
                <field name="document_type_id" attrs="{'readonly':[['state','not in',['draft']]]}"/>
                <field name="hide_apply_retention" invisible="1"/>
            </field>
            <field name="reference" position="after">
                <field name="hide_dua_fields" invisible="1"/>
                <field name="num_dua"/>
                <field name="year_emission_dua"/>
                <field name="code_dua"/>
                <field string="Detraccion" name="detrac_id" attrs="{'readonly':[['state','not in',['draft']]]}"/>
                <field name="apply_retention" invisible="1"/>
                <field name="retencion"/>
                <field name="type_ident" readonly="1"/>
                <field name="num_ident" readonly="1"/>
            </field>
            <field name="date_due" position="after">
                <field name="currency_type_id" invisible="1"/>
            </field>
            <field name="payments_widget" position="before">
                <field name="hide_detraction" invisible="1"/>
                <field name="detraccion" attrs="{'invisible':[('hide_detraction', '=', True)]}"/>
            </field>
            <field name="partner_id" position="before">
                <field name="operation_type"/>
            </field>
            <field name="partner_bank_id" position="after">
                <field name="type_operation" required="True"/>
            </field>
            <xpath expr="//notebook/page[last()]" position="after">
                <page string="Documento que Modifica">
                    <group>
                        <field name="refund_invoice_id"/>
                        <!-- Pendientes de Eliminacion -->
                        <!-- <field name="type_document_modifies_id"/> -->
                        <!-- <field name="num_document_modifies"/> -->
                        <!-- <field name="num_dua_document_modifies"/> -->
                    </group>
                </page>
                <page string="Detracciones">
                    <group>
                        <field name="date_detraction"/>
                        <field name="num_detraction"/>
                        <field name="proof_mark"/>
                        <field name="classifier_good"/>
                    </group>
                </page>
                <page string="Honorarios">
                    <group>
                        <field name="fourth_suspension"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!-- Tabla - Factura Proveedor -->
    <record id="detraccion_tree_view_factura" model="ir.ui.view">
        <field name="name">detraccion.tree.factura</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_supplier_tree"/>
        <field name="arch" type="xml">
            <field name="amount_total_signed" position="after">
                <field name="detraccion" sum="Total"/>
                <field name="detraccion_paid" invisible="1"/>
                <field name="detraction_residual" sum="Total"/>
                <field name="total_pagar" sum="Total" invisible="1"/>
            </field>
            <field name="date_invoice" position="replace">
                <field string="Fecha Contable" name="date_invoice"/>
                <field string="Fecha del Documento" name="date_document"/>
            </field>
            <field name="number" position="replace">
                <field name="invoice_number"/>
            </field>
            <field name="amount_untaxed" position="replace">
                <field name="amount_untaxed" invisible="1"/>
                <field name="inv_no_gravado"/>
                <field name="base_imp"/>
                <field name="base_igv"/>
            </field>
            <field name="amount_tax" position="replace">
                <field name="amount_tax" invisible="1"/>
                <field name="base_imp_ope_ex"/>
                <field name="base_igv_ope_ex"/>
                <field name="base_imp_no_gra"/>
                <field name="base_igv_no_gra"/>
            </field>
        </field>
    </record>

    <!-- Formulario - Factura Cliente -->
    <record id="_form_view_factura" model="ir.ui.view">
        <field name="name">sunat.form.invoice</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_form"/>
        <field name="arch" type="xml">
            <field name="partner_id" position="after">
                <field name="refund_invoice_id"/>
            </field>
            <field name="date_invoice" position="before">
                <field name="document_modify"/>
                <field name="date_document"/>
            </field>
            <field name="date_invoice" position="replace">
                <field string="Fecha Contable" name="date_invoice" options="{'datepicker': {'warn_future': true}}"/>
            </field>
            <field name="payment_term_id" position="after">
                <field name="type_ident" readonly="1"/>
                <field name="num_ident" readonly="1"/>
                <field name="inv_type_operation"/>
            </field>
            <xpath expr="//group/group/div" position="after">
                <field name="exchange_rate"/>
            </xpath>
            <xpath expr="//notebook/page[last()]" position="after">
                <page string="SUNAT">
                    <group>
                        <group>
                            <h2>Documento</h2>
                            <field name="document_type_id"/>
                            <field name="invoice_serie"/>
                            <field name="invoice_number"/>
                        </group>
                        <group>
                            <h2>Exportaci√≥n</h2>
                            <field name="export_invoice"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!-- Tabla - Factura Cliente -->
    <record id="sunat_account_invoice_tree" model="ir.ui.view">
        <field name="name">sunat.account.invoice.tree</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_tree_with_onboarding"/>
        <field name="arch" type="xml">
            <field name="amount_untaxed" position="after">
                <field name="inv_fac_exp" sum="Total"/>
                <field name="inv_exonerada" sum="Total"/>
                <field name="inv_inafecto" sum="Total"/>
                <field name="inv_isc" sum="Total"/>
            </field>
            <field name="amount_tax" position="after">
                <field name="inv_otros" sum="Total"/>
            </field>
            <field name="amount_untaxed" position="replace">
                <field name="amount_untaxed" invisible="1"/>
                <field name="inv_amount_untax" sum="Total"/>
            </field>

        </field>
    </record>

</odoo>