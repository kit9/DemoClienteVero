<odoo>

  <!-- Formulario - Detraccion en el Proveedor -->
  <record id="detraccion_form_view_proveedor" model="ir.ui.view">
    <field name="name">detraccion.form.proveedor</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form"/>
    <field name="arch" type="xml">
      <field name="vat" position="after">
        <field string="Detraccion" name="detrac_id"/>
      </field>
    </field>
  </record>

  <!-- Formulario - Detraccion Factura Proveedor -->
  <record id="detraccion_form_view_factura" model="ir.ui.view">
    <field name="name">detraccion.form.factura</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account.invoice_supplier_form"/>
    <field name="arch" type="xml">
      <field name="reference" position="after">
        <field name="num_dua" />
        <field name="year_emission_dua" />
        <field name="document_type_identity_id" />
        <field name="document_num" />
        <field string="Detraccion" name="detrac_id" attrs="{'readonly':[['state','not in',['draft']]]}"/>
        <field name="apply_retention" attrs="{'readonly':[['state','not in',['draft']]],'invisible':[('hide_apply_retention', '=', True)]}"/>
      </field>
      <field name="date_due" position="after">
        <field name="currency_type_id" />
      </field>
      <field name="payments_widget" position="before">
        <field name="detraccion" />
      </field>
      <field name="partner_id" position="before">
        <field name="operation_type" />
      </field>
      <field name="partner_id" position="after">
        <field string="Document Type" name="document_type_id" attrs="{'readonly':[['state','not in',['draft']]]}"/>
        <field name="hide_apply_retention" invisible="1"/>
      </field>
      <xpath expr="sheet//group" position="after">
        <group>
          <group>
            <h2>Detracciones</h2>
            <field name="date_detraction" />
            <field name="num_detraction" />
            <field name="proof_mark" />
            <field name="classifier_good" />
          </group>
          <group>
            <h2>Documento que Modifica</h2>
            <field name="type_document_modifies" />
            <field name="num_document_modifies" />
            <field name="code_dua" />
            <field name="num_dua" />
          </group>
        </group>
      </xpath>
    </field>
  </record>

  <!-- Vista - Detraccion Factura -->
  <record id="detraccion_tree_view_factura" model="ir.ui.view">
    <field name="name">detraccion.tree.factura</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account.invoice_supplier_tree"/>
    <field name="arch" type="xml">
      <field name="amount_total_signed" position="after">
        <field name="file_name" invisible="1"/>
        <field name="detraccion" sum="Total"/>
        <field name="detraccion_paid"/>
        <field name="total_pagar" sum="Total" invisible="1"/>
        <field name="file_txt" filename="file_name" widget="binary"/>
      </field>
    </field>
  </record>

  <!-- Accion de Prueba -->
  <!-- <record id="prueba" model="ir.actions.server">
    <field name="name">Prueba</field>
    <field name="model_id" ref="model_account_invoice"/>
    <field name="binding_model_id" ref="account.model_account_invoice"/>
    <field name="state">code</field>
    <field name="code">
for rec in records:
    rec.action_prueba()
    </field>
  </record> -->

</odoo>